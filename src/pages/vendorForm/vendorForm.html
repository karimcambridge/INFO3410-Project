<ion-header>
  <ion-navbar>
    <ion-title>Vendor Sign Up</ion-title>
  </ion-navbar>
</ion-header>

<div *ngIf="authService.user | async as user; then authenticated else guest">
  <!-- template will replace this div -->
</div>

<!-- User NOT logged in -->
<ng-template #guest>
  <ion-content padding class="page-vendorForm">
    <h2>Want to be a vendor?</h2>
    <br>
    <h2>Please register an account first</h2>
    <button ion-button color="secondary" round (click)="redirectToAccount()">Go to login</button>
    <button ion-button color="secondary" round (click)="goBack()">Back</button>
  </ion-content>
</ng-template>

<!-- User logged in -->
<ng-template #authenticated>
  <ion-content padding class="page-vendorForm">
    <br>
    <br>
    <br>
    <h2>Vendor Registration Form</h2>
    {{ authService.user.displayName }}
    <form (ngSubmit)="vendorSignUp()" [formGroup]="vendorForm">
      <ion-list inset>

        <ion-item [ngClass]="{ invalid: telErrors.hasError('*', ['touched', 'dirty']) }">
            <ion-label floating>Phone #</ion-label>
            <ion-input type="text" formControlName="tel"></ion-input>
        </ion-item>

        <div ngxErrors="tel" #telErrors="ngxErrors">
            <div [ngxError]="['tel', 'required']" [when]="['touched', 'dirty']">You should enter a valid tel</div>
        </div>

        <ion-item>
          <ion-label floating>Category</ion-label>
          <ion-select [(ngModel)]="category" formControlName="category">
            <ion-option value="food">Food</ion-option>
            <ion-option value="produce">Produce</ion-option>
            <ion-option value="jewellery">Jewellery</ion-option>
            <ion-option value="bodycare">Body Care</ion-option>
          </ion-select>
        </ion-item>

      </ion-list>
    </form>

    <div padding-horizontal>
        <div class="form-error">{{vendorError}}</div>

        <button ion-button full type="submit" [disabled]="!vendorForm.valid">Sign UP</button>

        <ion-list>
            <button ion-button icon-left block clear (click)="goBack()">
                Go Back
            </button>
        </ion-list>
    </div>
  </ion-content>
</ng-template>